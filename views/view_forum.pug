extends layout

block content
    .container
        h5 Posted by 
            a(href = '/user/profile/'+forum.author) #{forum.author} 
        h6 on #{forum.date.toDateString()}
        h1= forum.title
        br
        p= forum.body
        if user
            if user.username == forum.author
                a.btn.btn-default.btn-sm(href='/forum-posts/edit/'+forum._id) edit
                a.btn.btn-danger.btn-sm.delete-forum(href='#', data-id=forum._id) delete
        hr
        .container
            h3 Comments
            each c in forum.comments
                .panel
                    .panel-default
                        .panel-heading
                            h3.panel-title 
                                i.far.fa-clock #{' ' + c.date.toDateString()}
                        .panel-body #{c.content}
                        .panel-footer
                            // comments need an author so can go #{c.author} and c.author in href
                            a(href = '/user/profile/'+c.author)
                                i.glyphicon.glyphicon-user #{' ' + c.author + '    '}

                            if user
                                if c.author == user.username
                                    a.btn.btn-link.btn-sm(href='/comments', data-id=c._id) edit

        script(src='https://kit.fontawesome.com/d7fc33007f.js', crossorigin='anonymous')
        
        if user
            form(method='POST', action='/comments/'+forum._id)
                .form-group
                    label Comment as #{user.username}:
                    input.form-control(name='content')

                input.btn.btn-primary(type='submit', value='Post')

